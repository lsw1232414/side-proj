<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì˜¨ë¹„ë“œ ê³µë§¤ í…ŒìŠ¤íŠ¸</title>
</head>
<body>

<h1>ğŸ  ì˜¨ë¹„ë“œ ê³µë§¤ë¬¼ê±´ í…ŒìŠ¤íŠ¸ í™”ë©´</h1>

<button onclick="refresh()">ğŸ”„ API ë°ì´í„° DB ì €ì¥</button>
<button onclick="loadItems()">ğŸ“¥ DBì—ì„œ ìµœê·¼ 4ê°œ ì¡°íšŒ</button>

<div id="result"></div>

<script>
    function refresh() {
        fetch("/onbid/update", { method: "POST" })
            .then(r => r.text())
            .then(msg => alert(msg))
            .catch(err => console.error(err));
    }

    function loadItems() {
        fetch("/onbid/latest")
            .then(r => r.json())
            .then(list => {
                let html = "<h3>ğŸ“Œ ìµœê·¼ 4ê°œ ë¬¼ê±´</h3>";
                html += "<ul>";
                list.forEach(i => {
                    html += `<li>
                        [${i.itemId}] ${i.cltrNm} (${i.category})<br>
                        ë¬¼ê±´ë²ˆí˜¸: ${i.cltrNo}<br>
                        ì£¼ì†Œ: ${i.address}<br>
                        ê°ì •ê°€: ${i.appraisalPrice}
                    </li><hr>`;
                });
                html += "</ul>";
                document.getElementById("result").innerHTML = html;
            })
            .catch(err => console.error(err));
    }
</script>

</body>
</html>
